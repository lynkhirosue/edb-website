---
import '../styles/process.css';
import { loadBrewingSteps } from '../utils/data-loader';
import { Image } from 'astro:assets';
import processBackground from '../assets/images/process-bg.jpg';

export interface Props {
  className?: string;
}

const { className = "" } = Astro.props;

const brewingSteps = await loadBrewingSteps();
---

<section id="process" class={`process-section section-dark ${className}`} aria-labelledby="process-title">
  <div class="process-bg" aria-hidden="true">
    <Image
      src={processBackground}
      alt=""
      width={1920}
      height={1280}
      loading="lazy"
      quality={76}
      format="webp"
    />
  </div>

  <div class="process-container">
    <div class="process-header reveal">
      <h2 id="process-title" class="process-title">Le Brassage</h2>
      <p class="lead process-lead">
        Du grain au verre — les 7 étapes d'un brassin.
      </p>
    </div>

    <div class="process-steps reveal-stagger">
      {brewingSteps.map((step) => (
        <div class="process-step reveal">
          <span class="step-num">{step.number}</span>
          <div class="step-info">
            <h3 class="step-title">{step.title}</h3>
            <p class="step-description">{step.description}</p>
            <div class="step-meta">
              <span class="meta-item">{step.duration}</span>
              {step.temperature && (
                <span class="meta-item">{step.temperature}</span>
              )}
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
