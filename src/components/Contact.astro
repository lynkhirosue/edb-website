---
import '../styles/contact.css';

export interface Props {
  className?: string;
}

const { className = "" } = Astro.props;
---

<section id="contact" class={`contact-section ${className}`}>
  <div class="contact-container">
    
    <!-- Header -->
    <div class="contact-header">
      <h1 class="contact-title">√âcrivez-nous !</h1>
      <p class="contact-subtitle">
        Une question sur nos bi√®res ? Envie d'√©changer sur le brassage artisanal ?<br>
        Contactez-nous directement par email pour un √©change authentique et personnel.
      </p>
    </div>

    <!-- Card email avec notification -->
    <div class="email-card">
      <div class="email-icon">üìß</div>
      <h2 class="email-title">Contact direct</h2>
      
      <!-- Bouton qui d√©clenche la notification au lieu du mailto -->
      <button class="email-button" id="contactBtn" type="button">
        salut@lecoledubelier.beer
      </button>
      
      <p class="email-info">
        <span class="response-time">R√©ponse sous 24-48h</span>
        <span class="separator">‚Ä¢</span>
        <span class="activity-type">Activit√© artisanale</span>
      </p>
    </div>

    <!-- Informations compl√©mentaires -->
    <div class="contact-info">
      <div class="info-card notice-card">
        <div class="card-header">
          <span class="card-icon">‚ö†Ô∏è</span>
          <h3>Commandes</h3>
        </div>
        <p>Les commandes ne sont pas encore ouvertes.<br>
        Nous vous tiendrons inform√©s d√®s que ce sera possible !</p>
      </div>

      <div class="info-card passion-card">
        <div class="card-header">
          <span class="card-icon">üç∫</span>
          <h3>Notre passion</h3>
        </div>
        <p>L'√âcole du B√©lier est n√©e cette ann√©e de notre amour pour le brassage artisanal.<br>
        Nous adorons partager cette passion et r√©pondre √† vos questions !</p>
      </div>
    </div>

  </div>

  <!-- Toast Notification Moderne -->
  <div class="toast-notification" id="emailToast">
    <div class="toast-content">
      <div class="toast-icon">üöß</div>
      <div class="toast-text">
        <h3>Adresse email en construction</h3>
        <p>Notre adresse email d√©di√©e n'est pas encore disponible.<br>
        <strong>Nous vous informerons d√®s qu'elle sera op√©rationnelle !</strong></p>
      </div>
      <button class="toast-close" id="closeToast" aria-label="Fermer la notification">√ó</button>
    </div>
  </div>

  <!-- Overlay pour la modal -->
  <div class="toast-overlay" id="toastOverlay"></div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const contactBtn = document.getElementById('contactBtn');
    const emailToast = document.getElementById('emailToast');
    const closeToast = document.getElementById('closeToast');
    const overlay = document.getElementById('toastOverlay');
    
    // Fonction pour afficher la notification
    function showToast() {
      emailToast.classList.add('show');
      overlay.classList.add('show');
      document.body.style.overflow = 'hidden'; // Emp√™che le scroll
      
      // Focus sur le bouton fermer pour l'accessibilit√©
      setTimeout(() => closeToast.focus(), 100);
    }
    
    // Fonction pour masquer la notification
    function hideToast() {
      emailToast.classList.remove('show');
      overlay.classList.remove('show');
      document.body.style.overflow = ''; // Restaure le scroll
      contactBtn.focus(); // Retour focus sur le bouton
    }
    
    // √âv√©nements
    contactBtn.addEventListener('click', showToast);
    closeToast.addEventListener('click', hideToast);
    overlay.addEventListener('click', hideToast);
    
    // Fermeture avec Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && emailToast.classList.contains('show')) {
        hideToast();
      }
    });
    
    // Animation d'entr√©e du bouton email
    setTimeout(() => {
      contactBtn.classList.add('animate-in');
    }, 500);
  });
</script>
