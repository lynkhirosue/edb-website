---
import '../styles/contact.css';
import contactScriptUrl from '../scripts/contact.ts?url';

export interface Props {
  className?: string;
}

const { className = '' } = Astro.props;
const alertAction = 'https://formsubmit.co/nico@lecoledubelier.beer';
---

<section id="contact" class={`contact-section ${className}`} aria-labelledby="contact-title">
  <div class="contact-container reveal">
    <h2 id="contact-title" class="contact-title">Nous contacter</h2>
    <p class="lead contact-lead">
      Une question sur les bières ou la brasserie ? Écris-moi.
    </p>

    <a
      href="mailto:nico@lecoledubelier.beer"
      class="email-button js-contact-email"
      data-analytics="contact_click"
      data-analytics-label="mailto"
    >
      nico@lecoledubelier.beer
    </a>

    <form
      id="alert-form"
      class="alert-form"
      method="POST"
      action={alertAction}
      data-analytics="alert_signup"
      data-analytics-label="contact-section"
    >
      <input type="hidden" name="_subject" value="Nouvelle inscription: alerte sorties L'École du Bélier" />
      <input type="hidden" name="_captcha" value="false" />
      <input type="hidden" name="_template" value="table" />
      <input type="hidden" name="source" value="site-lecoledubelier" />

      <label for="alert-email" class="alert-label">Préviens-moi des prochaines sorties</label>
      <div class="alert-controls">
        <input
          id="alert-email"
          name="email"
          type="email"
          required
          autocomplete="email"
          placeholder="Votre email"
          class="alert-input"
        />
        <button type="submit" class="alert-submit">Activer l'alerte</button>
      </div>
    </form>

    <p class="contact-note">
      Service d'alerte opéré via FormSubmit. Aucune vente en ligne pour le moment.
    </p>
  </div>
</section>

<script type="module" src={contactScriptUrl}></script>
