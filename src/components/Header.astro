---
import '../styles/header.css';
---
<header class="header-section">
  <div class="header-container">
    <a href="/" class="logo-link">
      <img src="/logo-white-nobg.png" alt="Logo L’École du Bélier" class="logo-image" />
      <span class="site-title">L’École du Bélier</span>
    </a>

    <!-- Bouton mode jour/nuit -->
    <button id="theme-toggle" class="theme-toggle" aria-label="Basculer mode">
      <span id="theme-icon">🌙</span>
    </button>

    <button class="menu-toggle" aria-label="Ouvrir le menu">☰</button>
    <nav class="main-nav">
      <a href="#about">La Brasserie</a>
      <a href="#beers">Nos Bières</a>
      <a href="#process">Processus</a>
      <a href="#contact">Contact & Commandes</a>
    </nav>
  </div>

  <script>
    const toggle = document.getElementById('theme-toggle');
    const icon = document.getElementById('theme-icon');
    const root = document.documentElement;

    // Fonction pour mettre à jour l’icône
    function updateIcon() {
      if (root.classList.contains('dark')) {
        icon.textContent = '☀️';
        toggle.setAttribute('aria-label', 'Passer en mode jour');
      } else {
        icon.textContent = '🌙';
        toggle.setAttribute('aria-label', 'Passer en mode nuit');
      }
    }

    // Initialisation : applique le thème et l’icône corrects
    const stored = localStorage.getItem('theme');
    if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      root.classList.add('dark');
    }
    updateIcon();

    // Bascule au clic
    toggle.addEventListener('click', () => {
      const isDark = root.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      updateIcon();
    });
  </script>
</header>
