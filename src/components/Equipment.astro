---
import '../styles/equipment.css';
import { loadEquipment } from '../utils/data-loader';
import { Image } from 'astro:assets';
import G40 from '../assets/images/G40.webp';
import GF30 from '../assets/images/GF30.webp';
import GC2 from '../assets/images/GC2.webp';

export interface Props {
  className?: string;
}

const { className = "" } = Astro.props;

const equipmentData = await loadEquipment();

const imageMap: Record<string, any> = {
  '/G40.webp': G40,
  '/GF30.webp': GF30,
  '/GC2.webp': GC2
};
---

<section id="equipment" class={`equipment-section section-dark ${className}`} aria-labelledby="equipment-title">
  <div class="equipment-container">

    <div class="equipment-header reveal">
      <h2 id="equipment-title" class="equipment-title">Notre Équipement</h2>
      <p class="lead equipment-lead">
        Système Grainfather complet : brassage, fermentation et contrôle glycol.
      </p>
    </div>

    <div class="equipment-showcase reveal-stagger">
      {equipmentData.map((equipment) => (
        <div class="equipment-item reveal">
          <div class="equipment-image-container">
            <Image
              src={imageMap[equipment.image]}
              alt={equipment.name}
              class="equipment-image"
              width={420}
              height={420}
              loading="lazy"
              format="webp"
              quality={90}
            />
          </div>
          <h3 class="equipment-name">{equipment.name}</h3>
          <p class="equipment-description">{equipment.description}</p>
          <span class="equipment-capacity">{equipment.capacity}</span>
        </div>
      ))}
    </div>

  </div>
</section>
